
> myfrigo@1.0.1 test
> jest services/__tests__/UpdateService.test.ts

FAIL services/__tests__/UpdateService.test.ts
  UpdateService
    initialize
      ÔêÜ should initialize successfully in production (9 ms)
      ÔêÜ should not initialize in development mode (2 ms)
      ÔêÜ should not initialize on web (1 ms)
    checkForUpdate
      ÔêÜ should check for updates successfully (3 ms)
      ÔêÜ should handle no updates available (1 ms)
      ÔêÜ should handle check errors gracefully (2 ms)
    downloadUpdate
      ÔêÜ should download update successfully (2 ms)
      ├ù should return false if no update is available (7 ms)
    restartApp
      ├ù should not restart when no update is pending (503 ms)
      ÔêÜ should handle restart gracefully (515 ms)
    shouldCheckForUpdates
      ÔêÜ should return true when it's time to check
      ÔêÜ should return false when auto-check is disabled
      ÔêÜ should return false when not enough time has passed
    getDefaultSettings
      ÔêÜ should return default settings
    getCurrentBuildInfo
      ÔêÜ should return build information (1 ms)

  ÔùÅ UpdateService ÔÇ║ downloadUpdate ÔÇ║ should return false if no update is available

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      135 |       const result = await UpdateService.downloadUpdate();
      136 |
    > 137 |       expect(result).toBe(false);
          |                      ^
      138 |     });
      139 |   });
      140 |

      at Object.toBe (services/__tests__/UpdateService.test.ts:137:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ÔùÅ UpdateService ÔÇ║ restartApp ÔÇ║ should not restart when no update is pending

    expect(jest.fn()).not.toHaveBeenCalled()

    Expected number of calls: 0
    Received number of calls: 1

    1: called with 0 arguments

      156 |
      157 |       // reloadAsync should not be called when isUpdatePending is false
    > 158 |       expect(expoUpdates.reloadAsync).not.toHaveBeenCalled();
          |                                           ^
      159 |     });
      160 |
      161 |     it('should handle restart gracefully', async () => {

      at Object.toHaveBeenCalled (services/__tests__/UpdateService.test.ts:158:43)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 13 passed, 15 total
Snapshots:   0 total
Time:        2.861 s, estimated 3 s
Ran all test suites matching services/__tests__/UpdateService.test.ts.
