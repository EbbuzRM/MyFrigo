# 🤖 Linee Guida per l'Agente AI - MyFrigo

## 📋 **Principi Fondamentali**

### 1. **RISOLVI, NON AGGIRARE**
- ❌ **MAI** commentare, disabilitare o rimuovere funzionalità che non funzionano
- ✅ **SEMPRE** identificare la causa root e risolverla
- ✅ Se manca un `testID`, aggiungilo al codice
- ✅ Se un elemento non è accessibile, modifica il codice per renderlo accessibile

### 2. **CHIEDI QUANDO NON SAI**
- ✅ Se un test fallisce e non trovi la causa nel codice, **CHIEDI ALL'UTENTE**
- ✅ L'utente può vedere l'app reale e spiegare cosa succede
- ❌ Non fare supposizioni o tentativi casuali

### 3. **DEBUGGING SISTEMATICO**
- ✅ Analizza sempre il codice sorgente per capire il comportamento
- ✅ Verifica testi esatti, ID, struttura UI
- ✅ Usa `--debug-output` per vedere log dettagliati
- ✅ Correggi un problema alla volta

## 🧪 **Test Maestro - Regole Specifiche**

### Comandi Supportati
```yaml
✅ USARE:
- tapOn: "text" / tapOn: id: "element-id"
- inputText: "text"
- eraseText
- assertVisible: "text" / assertVisible: id: "element-id"
- waitForAnimationToEnd
- runFlow: filename.yml
- swipe: direction: UP/DOWN/LEFT/RIGHT

❌ NON SUPPORTATI:
- clearText (usa eraseText)
- wait: milliseconds (usa waitForAnimationToEnd)
- testID: (usa id:)
- pullToRefresh:
- longPressOn:
- scroll: direction:
```

### Timing e Performance
- ✅ **SEMPRE** `waitForAnimationToEnd` dopo azioni che cambiano UI
- ✅ Aggiungi multipli `waitForAnimationToEnd` dopo `launchApp` per il caricamento
- ✅ Usa `eraseText` prima di `inputText` per sostituire testo esistente

### Elementi UI
- ✅ **Switch/Toggle**: Aggiungi `testID` e usa `tapOn: id:`
- ✅ **Dialog nativi**: Cerca i pulsanti ("Annulla", "OK") non il titolo
- ✅ **Scroll**: Usa `swipe` con coordinate relative per navigare
- ✅ **Ricerca**: Sempre `eraseText` prima di inserire nuovo testo

## 🔧 **Processo di Correzione**

### Quando un Test Fallisce:
1. **Analizza il log** per capire dove fallisce
2. **Controlla il codice sorgente** per l'elemento specifico
3. **Se non trovi la causa**, chiedi all'utente: "Perché è fallito questo step?"
4. **Implementa la correzione** modificando codice o test
5. **Testa la correzione** prima di procedere

### Modifiche al Codice:
- ✅ Aggiungi `testID` agli elementi interattivi
- ✅ Assicurati che testi e ID siano consistenti
- ✅ Rendi accessibili elementi che devono essere testati

## 📝 **Documentazione**

### Ogni Correzione Deve:
- ✅ Spiegare il problema originale
- ✅ Descrivere la soluzione implementata
- ✅ Verificare che funzioni con test
- ✅ Aggiornare documentazione se necessario

### File da Mantenere:
- ✅ `TEST_CORRECTIONS_SUMMARY.md` - Riepilogo correzioni
- ✅ `README.md` - Istruzioni aggiornate
- ✅ Commenti nei test per spiegare soluzioni specifiche

## 🚫 **COSA NON FARE MAI**

1. ❌ Commentare righe di test che falliscono
2. ❌ Rimuovere funzionalità invece di correggerle
3. ❌ Fare supposizioni sui dati (categorie, testi, ecc.)
4. ❌ Usare comandi Maestro non supportati
5. ❌ Ignorare errori o fallimenti
6. ❌ Creare workaround invece di soluzioni reali

## ✅ **COSA FARE SEMPRE**

1. ✅ Leggere e seguire queste linee guida
2. ✅ Risolvere problemi alla radice
3. ✅ Chiedere chiarimenti quando necessario
4. ✅ Testare ogni correzione
5. ✅ Documentare le soluzioni
6. ✅ Mantenere qualità del codice alta

---

**Ricorda: L'obiettivo è creare test robusti e affidabili, non aggirare i problemi!**